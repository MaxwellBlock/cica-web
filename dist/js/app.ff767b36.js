(function(t){function e(e){for(var r,u,i=e[0],a=e[1],s=e[2],f=0,d=[];f<i.length;f++)u=i[f],Object.prototype.hasOwnProperty.call(o,u)&&o[u]&&d.push(o[u][0]),o[u]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);l&&l(e);while(d.length)d.shift()();return c.push.apply(c,s||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],r=!0,i=1;i<n.length;i++){var a=n[i];0!==o[a]&&(r=!1)}r&&(c.splice(e--,1),t=u(u.s=n[0]))}return t}var r={},o={app:0},c=[];function u(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=t,u.c=r,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)u.d(n,r,function(e){return t[e]}.bind(null,r));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],a=i.push.bind(i);i.push=e,i=i.slice();for(var s=0;s<i.length;s++)e(i[s]);var l=a;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},15:function(t,e){},16:function(t,e){},17:function(t,e){},18:function(t,e){},19:function(t,e){},2:function(t,e){},20:function(t,e){},3:function(t,e){},4:function(t,e){},5:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("CrowdFund")],1)},c=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("h3",[t._v(" CICA ")]),n("span",[t._v("测试CICA ")]),n("p",[t._v("这是我的地址"+t._s(t.currentAccount))]),n("p",[t._v("这是我的余额"+t._s(t.balance))]),n("p",[t._v("当前网络: "+t._s("0x1"===t.chainId?"以太坊主网":"其他网络"))]),n("p",[t._v("合约上的值为: "+t._s(t.myNum))]),n("button",{on:{click:t.linkwallet}},[t._v("连接钱包")]),n("br"),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.contractNum,expression:"contractNum"}],attrs:{placeholder:"edit me"},domProps:{value:t.contractNum},on:{input:function(e){e.target.composing||(t.contractNum=e.target.value)}}}),n("button",{on:{click:t.setContractCounter}},[t._v("发送交易")]),n("button",{on:{click:t.signData}},[t._v("点击签名")])])},i=[],a=n("1da1"),s=(n("96cf"),n("6314")),l=n("2606"),f=n("8d6a"),d={name:"CrowdFund",data:function(){return{currentAccount:"",balance:0,chainId:"",provider:null,web3:null,helloC:null,myNum:0,contractNum:null,myContract:null}},created:function(){this.initMetaMask(),this.updateAccount(),this.checkNetwork(),this.updateNetwork()},computed:{},methods:{initMetaMask:function(){"undefined"!==typeof window.ethereum?(window.ethereum.isMetaMask||console.error("是否安装了其他钱包？"),this.linkwallet()):alert("请安装MetaMask")},linkwallet:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_requestAccounts"}).then(t.handleAccountChanged).catch((function(t){4001===t.code?console.log("user rejected"):console.error(t)}));case 2:case"end":return e.stop()}}),e)})))()},handleAccountChanged:function(t){0===t.length?console.log("请连接Metamask"):(this.currentAccount=t[0],this.initWeb3())},updateAccount:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.ethereum.on("accountsChanged",t.handleAccountChanged);case 1:case"end":return e.stop()}}),e)})))()},handleChainChanged:function(t){this.chainId=t,window.location.reload()},checkNetwork:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.request({method:"eth_chainId"});case 2:n=e.sent,t.chainId=n;case 5:case"end":return e.stop()}}),e)})))()},updateNetwork:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.ethereum.on("chainChanged",t.handleChainChanged);case 1:case"end":return e.stop()}}),e)})))()},initWeb3:function(){if(window.ethereum)this.provider=window.ethereum;else try{this.provider=new s.providers.HttpProvider("https://data-seed-prebsc-2-s2.binance.org:8545")}catch(t){console.error(t)}this.web3=new s(this.provider),this.getBalance(),this.initContract()},signData:function(){return Object(a["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=new l.Web3Provider(window.ethereum),n=e.getSigner(),n.signMessage("1111");case 3:case"end":return t.stop()}}),t)})))()},initContract:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n="0x56E020848EEdED7766Da1F096c790eF86b92e4B3",t.myContract=new t.web3.eth.Contract(f,n),t.getContractCounter();case 3:case"end":return e.stop()}}),e)})))()},getBalance:function(){var t=this;this.web3.eth.getBalance(this.currentAccount,(function(e,n){t.balance=t.web3.utils.fromWei(n,"ether")}))},getContractCounter:function(){var t=this;this.myContract.methods.getCounter().call((function(e,n){console.log("myNum",n),t.myNum=n}))},setContractCounter:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t,t.contractNum=null,t.myContract.methods.setCounter().send({from:t.currentAccount}).on("receipt",(function(){n.getContractNum()})).on("error",(function(t){console.log("交易失败了",t)}));case 3:case"end":return e.stop()}}),e)})))()}},watch:{},mounted:function(){}},p=d,h=n("2877"),m=Object(h["a"])(p,u,i,!1,null,null,null),w=m.exports,v={name:"App",components:{CrowdFund:w},methods:{}},g=v,b=(n("034f"),Object(h["a"])(g,o,c,!1,null,null,null)),y=b.exports,C=(n("d3b7"),n("fc76").default),k=C.create({baseURL:"",timeout:1e4}),_={apiGet:function(t,e){return void 0==e&&(e={}),new Promise((function(n,r){k.get(t,{params:e}).then((function(t){n(t.data)}),(function(t){r(t)}))}))}},x={methods:_};r["a"].mixin(x),r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(y)}}).$mount("#app")},"56e7":function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="56e7"},6:function(t,e){},7:function(t,e){},8:function(t,e){},"85ec":function(t,e,n){},"8d6a":function(t,e){var n=[{inputs:[],name:"counter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0},{inputs:[],name:"setCounter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function",constant:!0}];t.exports=n},9:function(t,e){}});
//# sourceMappingURL=app.ff767b36.js.map